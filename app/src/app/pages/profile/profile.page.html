<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <div class="profile-header" *ngIf="user$ | async as user; else noUser">
    <div class="avatar-circle">
      {{ (user.name || user.email || 'U').charAt(0).toUpperCase() }}
    </div>
    <h2>{{ user.name || 'User' }}</h2>
    <p>{{ user.email || 'Guest User' }}</p>

    <ion-badge color="primary" mode="ios" class="role-badge">
      {{ user.role | titlecase }}
    </ion-badge>
  </div>

  <ng-template #noUser>
    <div class="profile-header">
      <div class="avatar-circle guest">G</div>
      <h2>Guest</h2>
      <p>Not logged in</p>
      <ion-button size="small" (click)="goToLogin()">Login Now</ion-button>
    </div>
  </ng-template>

  <ion-list lines="none" class="menu-list">
    <ion-list-header>
      <ion-label>Account</ion-label>
    </ion-list-header>

    <ion-item button detail>
      <ion-icon slot="start" name="person-outline"></ion-icon>
      <ion-label>Personal Information</ion-label>
    </ion-item>

    <ion-item button detail>
      <ion-icon slot="start" name="card-outline"></ion-icon>
      <ion-label>Payment Methods</ion-label>
    </ion-item>

    <ion-item button detail *ngIf="(user$ | async)?.role === 'business'" routerLink="/tabs/wallet">
      <ion-icon slot="start" name="briefcase-outline"></ion-icon>
      <ion-label>Business Dashboard</ion-label>
    </ion-item>
  </ion-list>

  <ion-list lines="none" class="menu-list">
    <ion-list-header>
      <ion-label>Settings</ion-label>
    </ion-list-header>

    <ion-item button detail>
      <ion-icon slot="start" name="notifications-outline"></ion-icon>
      <ion-label>Notifications</ion-label>
    </ion-item>
  </ion-list>

  <div class="ion-padding">
    <ion-button expand="block" color="danger" fill="outline" (click)="logout()">
      Logout
    </ion-button>
  </div>

</ion-content>